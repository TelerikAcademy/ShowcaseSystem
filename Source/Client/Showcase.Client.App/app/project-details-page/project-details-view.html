<section ng-controller="ProjectDetailsController as vm">
    <div class="container">
        <div class="row">
            <div class="col-md-offset-1 col-md-3" animate="fadeInLeft" data-animation-delay="200">
                <img src="{{vm.project.mainImageUrl}}" width="250" height="250" alt="{{vm.project.name}}" />
                <div class="text-center" style="padding-right: 10px;" animate="fadeIn" data-animation-delay="1500">
                    <br />
                    <i class="fa fa-eye" style="margin-right: 5px;"></i><span style="margin-right: 20px;">{{vm.project.visits}}</span>
                    <i class="fa fa-comments" style="margin-right: 5px;"></i><span style="margin-right: 20px;">{{vm.project.comments}}</span>
                    <button class="btn btn-xs btn-success" style="margin-left: 10px;" ng-click="vm.isLiked ? vm.dislikeProject(vm.project.id) : vm.likeProject(vm.project.id)">
                        <i ng-class="vm.isLiked ? 'fa fa-thumbs-down' : 'fa fa-thumbs-up'"></i>{{vm.isLiked ? 'Remove Like' : 'Like'}} ({{vm.likes}})
                    </button>
                </div>
            </div>
            <div class="col-md-7" animate="fadeInRight" data-animation-delay="200" style="margin-bottom: 10px;">
                <h2 style="margin-bottom: 0">{{vm.project.name}}</h2>
                <div animate="fadeIn" data-animation-delay="1000">
                    <i class="fa fa-clock-o" style="margin-right: 5px;"></i><span style="margin-right: 10px; font-size: 0.85em;">{{vm.project.shortDate}}</span> |
                    <i class="fa fa-code" style="margin-right: 5px; margin-left: 10px;"></i><a href="{{vm.project.repositoryUrl}}" target="_blank" style="margin-right: 10px">repository</a> |
                    <i class="fa fa-external-link-square" style="margin-right: 5px; margin-left: 10px;"></i><a href="{{vm.project.liveDemoUrl}}" target="_blank">live demo</a>
                    <div class="pull-right">
                        <a href="#" class="btn btn-sm ico-only rounded btn-facebook">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="#" class="btn btn-sm ico-only rounded btn-twitter">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#" class="btn btn-sm ico-only rounded btn-google-plus">
                            <i class="fa fa-google-plus"></i>
                        </a>
                    </div>
                </div>
                <p class="text-justify" style="margin-top: 15px;">
                    {{vm.project.content}}
                </p>
                <span ng-repeat="collaborator in vm.project.collaborators">
                    <a href="/users/{{collaborator}}" style="margin-bottom: 2px; margin-right: 5px;">{{collaborator}}</a>
                </span>
                <div style="margin-top: 5px;">
                    <a href="#" ng-repeat="tag in vm.project.tags">
                        <span class="label label-default" style="background-color: {{tag.backgroundColor}}; color: {{tag.foregroundColor}}">{{tag.name}}</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-1 col-md-10" style="margin-top: 20px;" animate="fadeInUp" data-animation-delay="200">
                <div owl-carousel images="vm.images" />
            </div>
        </div>
        <div class="row" style="margin-top: 10px;">
            <div class="col-md-offset-1 col-md-10" animate="fadeInUp" data-animation-delay="200">
                <h4 style="margin-bottom: 10px;">
                    Comments
                </h4>
                <div class="row" ng-repeat="comment in vm.comments" style="margin-bottom: 20px;">
                    <div class="col-md-2">
                        <a href="/users/{{comment.username}}">{{comment.username}}</a><br />
                        <i class="fa fa-clock-o" style="margin-right: 5px;"></i><span style="font-size: 0.75em;">{{comment.shortDate}}</span>
                    </div>
                    <div class="col-md-10">
                        <h4>
                            <a href="/projects/{{comment.projectId}}/{{comment.projectTitleUrl}}">{{comment.projectTitle}}</a>
                        </h4>
                        <p style="margin-bottom: 10px; margin-top: 0">
                            {{comment.content}}
                        </p>
                    </div>
                </div>
                <div class="text-center" style="margin-bottom: 20px; ">
                    <a ng-click="vm.loadMoreComments(vm.project.id)" ng-hide="vm.isLastPage">Load More....</a>
                </div>
                <form style="margin: 0; padding: 0">
                    <textarea rows="8" cols="70" ng-model="vm.commentText" style="padding-left: 10px; padding-right: 10px"></textarea>
                    <br />
                    <button class="btn btn-sm btn-success" ng-click="vm.commentProject(vm.project.id)">Comment</button>
                </form>
            </div>
        </div>
    </div>
</section>